{"version":3,"sources":["../../src/components/TextEditorComponent.js"],"names":["types","JsIcon","HtmlIcon","JsonIcon","CssIcon","OpenFilesComponent","showFile","closeFile","openFiles","currentFile","FileComponents","Object","keys","map","filename","index","file","onDisplay","isCurrent","filepath","path","sourceCode","prevOpenFilePath","onClose","FileIcon","fileType","Icon","isSaved","CancelIcon","className","propTypes","PropTypes","func","object","string","TextEditor","saveFile","editFile","data","isNew","runProjectRendering","isRunning","stopRenderering","project","name","updateGUI","dependencies","includes","onClick","e","console","log","update_code","lang","runFile","projecttype","type","stopFile","code","document","getElementById","window","value","onEdit","E","doc","Doc","FuncIcon","UnSaved","bool","updateProjectRendering","time","number"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport JsIcon from \"../icons/javascript.jsx\";\nimport CssIcon from \"../icons/CssIcon.jsx\";\nimport HtmlIcon from \"../icons/HtmlIcon.jsx\";\nimport JsonIcon from \"../icons/JsonIcon.jsx\";\nimport SaveIcon from \"../icons/Saved.jsx\";\nimport UnSavedIcon from \"../icons/UnSaved.jsx\";\nimport RunIcon  from \"../icons/runFile.jsx\";\nimport CancelIcon from \"../icons/CancelIcon.jsx\";\n\nconst types ={ 'javascript':JsIcon,'html':HtmlIcon,'json':JsonIcon,'css':CssIcon };\n\nconst OpenFilesComponent = ({ showFile,closeFile,openFiles,currentFile }) => {\n    const FileComponents = Object.keys(openFiles).map((filename,index) => \n    {\n        let file = openFiles[filename];\n        //onclick function displays file contents when file name is clicked on.\n        const onDisplay = () => \n        { \n            //if file is already the current file do not proceed further.\n            return file.isCurrent || \n                showFile({ \n                    filepath:file.path,\n                    sourceCode:file.sourceCode,\n                    prevOpenFilePath:currentFile \n                }); \n        }\n        const onClose = () => {\n            //in the event that user wishes to close the file.\n            return closeFile(filename);\n        }\n        let FileIcon = types[file.fileType] || (() => { return ''; });\n        let Icon = file.isSaved ? CancelIcon : () => { return ''; };\n\n        //let trunc = filename.length > 15 ? `${filename.substring(0,15)}...`:filename;\n\n        let className = file.isCurrent ? 'dashboard-file-name-current':'dashboard-file-name';\n        return (\n            <div className={className} onClick={onDisplay} key={`${filename}-${index}`}> \n                <FileIcon \n                    className=\"file-icon\" \n                    key={`${filename}-${file.fileType}-${index}`} />\n                <span className=\"string-file-name\" >{ filename }</span>\n                <Icon className='file-icon' key={`${filename}-${index}-icon`}  onClick={onClose} />\n            </div>\n        );\n    })\n    return (\n        <div className=\"file-dashboard \"> { FileComponents } </div>\n    )\n}\nOpenFilesComponent.propTypes = {\n    showFile:PropTypes.func,\n    openFiles:PropTypes.object,\n    closeFile:PropTypes.func,\n    currentFile:PropTypes.string\n}\n\nconst TextEditor = ({ saveFile,currentFile,editFile,data,isNew,runProjectRendering,isRunning,showFile,openFiles,closeFile,stopRenderering,project }) => {\n    let { sourceCode,path,name,fileType,isSaved } = data;\n    let updateGUI = (isRunning && project.dependencies.includes(path));\n    let FileIcon =  types[fileType] || (() => { return ''; })\n    let onClick = (e) => { \n        console.log(\" current source code \",sourceCode);\n        return saveFile({ filepath:path,sourceCode,update_code:updateGUI,lang:fileType }); \n    }\n\n    let runFile = e => {\n        return runProjectRendering({\n            filepath:path,\n            projecttype:project.type,\n            sourceCode,\n            filename:name\n        });\n    }\n    let stopFile = e => { return stopRenderering(); }\n\n    if (isNew) {\n        let code = document.getElementById(\"code\");\n        window.code = code;\n        if (code)  document.getElementById('code').value = sourceCode;\n    }\n\n    //onEdit function for when code is manipulated.\n    let onEdit = (e) => {\n        window.E = e;\n        let doc = document.getElementById('code');\n        window.Doc = doc;\n        return editFile({ sourceCode:doc.value,isRunning:updateGUI });\n    }\n\n    let FuncIcon = isRunning ? \n        <span className=\"file-stop\" onClick={stopFile} > \n            <CancelIcon className=\"cancel-icon\"/> stop child process.\n        </span>\n        :<span className=\"file-run\" onClick={runFile} > <RunIcon className=\"run-icon\"/> run file </span>\n\n    //maintain automatic updating of gui when changes are made.\n    let UnSaved  = isSaved ?  '':<UnSavedIcon className=\"unsaved-icon\" key=\"unsaved-icon\" />\n    return (\n        <div className=\"text-editor\" >\n            <div className=\"col-md-12 file-data\">\n                <span className=\"file-name \"> { name }{ UnSaved } </span>\n                <span className=\"file-type \"> <FileIcon className=\"file-icon\"/> file type { fileType } </span>\n                <span className=\"file-button\" onClick={onClick}  > \n                    <SaveIcon className=\"save-icon\"  autoFocus={false} />\n                    save file.\n                </span>\n                { FuncIcon }\n            </div>\n            <OpenFilesComponent \n                showFile={showFile} \n                openFiles={openFiles} \n                closeFile={closeFile} currentFile={ currentFile } />\n            <hr className=\"horizontal\" />\n            <div className=\"col-md-12 text-editor\">\n                <textarea id=\"code\" \n                    spellCheck={false} \n                    autoFocus={false} \n                    onInput={onEdit}\n                    //onKeyDown={onEdit}\n                    data-source={sourceCode} \n                    defaultValue={sourceCode} ></textarea>\n            </div>\n        </div>\n    )\n}\nTextEditor.propTypes = {\n    data:PropTypes.object,\n    saveFile:PropTypes.func,\n    editFile:PropTypes.func,\n    isNew:PropTypes.bool,\n    project:PropTypes.object,\n    runProjectRendering:PropTypes.func,\n    updateProjectRendering:PropTypes.func,\n    isRunning:PropTypes.bool,\n    time:PropTypes.number,\n    currentFile:PropTypes.string,\n    showFile:PropTypes.func,\n    closeFile:PropTypes.func,\n    openFiles:PropTypes.object,\n    stopRenderering:PropTypes.func\n}\nexport default TextEditor;"],"file":"TextEditorComponent.js"}