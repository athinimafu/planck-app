{"version":3,"sources":["../src/ChildProcessUpdater.js"],"names":["ipcRenderer","require","E","_path","languages","ProcessGUI","init","saveFunc","AppState","language","options","interval","_lang","_time","_int","updateInterval","_saveFunc","_appState","_process_running","setLanguage","lang","monitorUpdate","setInterval","Date","now","updateCode","isProcessRenderering","sourceCode","path","session","currentSourceCode","dependencies","getDependencies","console","log","includes","send","UPDATE_GUI","extname","filepath","update_code","updateTime","stopMonitoring","clearInterval","module","exports"],"mappings":";;AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAkBC,OAAO,CAAC,UAAD,CAA/B;;AACA,MAAMC,CAAC,GAAiBD,OAAO,CAAC,UAAD,CAA/B;;AACA,MAAME,KAAK,GAAaF,OAAO,CAAC,MAAD,CAA/B;AACA;;;AACA,MAAMG,SAAS,GAAG;AACd,WAAQ,MADM;AACC,SAAM,YADP;AACoB,UAAO;AAD3B,CAAlB;AAGA,MAAMC,UAAU,GAAG;AACf;AACAC,EAAAA,IAAI,CAACC,QAAD,EAAUC,QAAV,EAAmBC,QAAQ,GAAC,EAA5B,EAA+BC,OAAO,GAAC;AAAEC,IAAAA,QAAQ,EAAC;AAAX,GAAvC,EAAyD;AACzD,SAAKC,KAAL,GAAaH,QAAb;AACA,SAAKI,KAAL,GAAa,CAAC,CAAd;AACA,SAAKC,IAAL,GAAaJ,OAAO,CAACC,QAArB;AACA,SAAKI,cAAL,GAAsB,IAAtB;AACA,SAAKC,SAAL,GAAiBT,QAAjB;AACA,SAAKU,SAAL,GAAiBT,QAAjB;AACA,SAAKU,gBAAL,GAAwB,KAAxB;AACH,GAVc;;AAaf;AACAC,EAAAA,WAAW,CAACC,IAAD,EAAO;AAAE,SAAKR,KAAL,GAAaQ,IAAb;AAAoB,GAdzB;;AAgBf;AACAC,EAAAA,aAAa,GAAG;AACZ,SAAKH,gBAAL,GAAwB,IAAxB;AACA,SAAKH,cAAL,GAAsBO,WAAW,CAAC,MAAM;AACpC,UAAI,KAAKT,KAAL,IAAc,CAAlB,EAAqB;;AACrB,UAAIU,IAAI,CAACC,GAAL,KAAa,KAAKX,KAAlB,GAA0B,KAAKC,IAAnC,EAAyC;AACrC,aAAKW,UAAL,GADqC,CAErC;;AACA,aAAKZ,KAAL,GAAa,CAAC,CAAd;AACH;AACJ,KAPgC,EAO/B,KAAKC,IAP0B,CAAjC;AAQH,GA3Bc;;AA6BfY,EAAAA,oBAAoB,GAAG;AAAE,WAAO,KAAKR,gBAAZ;AAA8B,GA7BxC;;AA6B2C;;AAE1D;AACAO,EAAAA,UAAU,GAAG;AACT,QAAI;AAAEE,MAAAA,UAAF;AAAaC,MAAAA;AAAb,QAAsB,KAAKX,SAAL,CAAeY,OAAf,CAAuBC,iBAAjD;;AACA,QAAIC,YAAY,GAAG,KAAKd,SAAL,CAAee,eAAf,EAAnB,CAFS,CAGT;AACA;;;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAqCH,YAArC,EAAkD,gBAAlD,EAAmEH,IAAnE;;AACA,QAAIG,YAAY,CAACI,QAAb,CAAsBP,IAAtB,CAAJ,EAAiC;AAC7BK,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACAlC,MAAAA,WAAW,CAACoC,IAAZ,CAAiBlC,CAAC,CAACmC,UAAnB,EAA8B;AAAEV,QAAAA,UAAF;AAAaC,QAAAA,IAAb;AAAkBR,QAAAA,IAAI,EAAChB,SAAS,CAACD,KAAK,CAACmC,OAAN,CAAcV,IAAd,CAAD;AAAhC,OAA9B;AACH,KATQ,CAUT;;;AACA,SAAKZ,SAAL,CAAe;AAACuB,MAAAA,QAAQ,EAACX,IAAV;AAAeD,MAAAA,UAAf;AAA0Ba,MAAAA,WAAW,EAAC;AAAtC,KAAf;AACH,GA5Cc;;AA8Cf;AACAC,EAAAA,UAAU,GAAG;AAAE,SAAK5B,KAAL,GAAaU,IAAI,CAACC,GAAL,EAAb;AAAyB,GA/CzB;;AAiDf;AACAkB,EAAAA,cAAc,GACd;AACIC,IAAAA,aAAa,CAAC,KAAK5B,cAAN,CAAb;AAAmC,SAAKF,KAAL,GAAa,CAAC,CAAd;AACnC,SAAKK,gBAAL,GAAwB,KAAxB;AACH;;AAtDc,CAAnB;AAwDA0B,MAAM,CAACC,OAAP,GAAiBxC,UAAjB","sourcesContent":["const { ipcRenderer } = require(\"electron\");\r\nconst E               = require(\"./events\");\r\nconst _path           = require(\"path\");\r\n/** functionality moniters and handles code updates to the child gui process. */\r\nconst languages = {\r\n    '.html':'html','.js':\"javascript\",\".css\":\"css\"\r\n}\r\nconst ProcessGUI = {\r\n    /** manages the updating of the renderer gui. */\r\n    init(saveFunc,AppState,language='',options={ interval:200 }) {\r\n        this._lang = language;\r\n        this._time = -1;\r\n        this._int  = options.interval;\r\n        this.updateInterval = null;\r\n        this._saveFunc = saveFunc;\r\n        this._appState = AppState;\r\n        this._process_running = false;\r\n    },\r\n\r\n    \r\n    /**set language currently in use in the project. */\r\n    setLanguage(lang) { this._lang = lang; },\r\n\r\n    /** functionality which moniters changes to the gui then sends appropriate updates to main process. */\r\n    monitorUpdate() {\r\n        this._process_running = true;\r\n        this.updateInterval = setInterval(() => {\r\n            if (this._time <= 0) return;\r\n            if (Date.now() - this._time > this._int) {\r\n                this.updateCode();\r\n                //reset time to -1.\r\n                this._time = -1;\r\n            }\r\n        },this._int);       \r\n    },\r\n\r\n    isProcessRenderering() { return this._process_running },  //if process is running or not.\r\n\r\n    /* functionality which updates code. */\r\n    updateCode() { \r\n        let { sourceCode,path } = this._appState.session.currentSourceCode;\r\n        let dependencies = this._appState.getDependencies();\r\n        //update gui.\r\n        //console.log(\" updating code \");\r\n        console.log(\" current dependencies \",dependencies,\" current path \",path);\r\n        if (dependencies.includes(path)) {\r\n            console.log(\" gui being updated.. \");\r\n            ipcRenderer.send(E.UPDATE_GUI,{ sourceCode,path,lang:languages[_path.extname(path)] });\r\n        }\r\n        //save the file to the file system.\r\n        this._saveFunc({filepath:path,sourceCode,update_code:false});\r\n    },\r\n\r\n    /** functionality for updating time. */\r\n    updateTime() { this._time = Date.now() },\r\n\r\n    /* stop gui monitering process --> this likely means gui process has been killed */\r\n    stopMonitoring() \r\n    { \r\n        clearInterval(this.updateInterval);this._time = -1; \r\n        this._process_running = false;\r\n    }\r\n}\r\nmodule.exports = ProcessGUI;"],"file":"ChildProcessUpdater.js"}