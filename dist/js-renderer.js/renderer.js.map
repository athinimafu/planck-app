{"version":3,"sources":["../../src/js-renderer.js/renderer.js"],"names":["ipcRenderer","require","E","prettier","writeFile","promises","_path","JSDependencies","prettify","sourceCode","format","parser","setHtmlCode","html","document","getElementsByTagName","header","body","getElementById","innerHTML","console","log","_fetchVariableName","_var","depPath","split","length","replace","_mapJSDependencies","dependencies","_dep","index","Object","keys","i","setReport","report","abspath","resolve","encoding","setJSDependencies","dependencyMap","htmlParentContainer","variableName","window","ScriptElement","createElement","type","id","includes","text","push","depCon","child","appendChild","setCSSDependencies","cssDependencyMap","csspath","StyleElement","textContent","on","RUN_GUI","e","projectData","js","css","dependencMap","send","UI_READY","UPDATE_GUI","data","path"],"mappings":";;AAAA;AACA;AACA;AACA,MAAM;AAAEA,EAAAA;AAAF,IAAkBC,OAAO,CAAC,UAAD,CAA/B;;AACA,MAAMC,CAAC,GAAGD,OAAO,CAAC,WAAD,CAAjB;;AACA,MAAME,QAAQ,GAAGF,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAM;AAAEG,EAAAA;AAAF,IAAgBH,OAAO,CAAC,IAAD,CAAP,CAAcI,QAApC;;AACA,MAAMC,KAAK,GAAGL,OAAO,CAAC,MAAD,CAArB;;AAEA,IAAIM,cAAc,GAAG,EAArB;AAEA;AACA;AACA;AACA;;AACA,SAASC,QAAT,CAAkBC,UAAlB,EAA8B;AAC1B,SAAON,QAAQ,CAACO,MAAT,CAAgBD,UAAhB,EAA2B;AAAEE,IAAAA,MAAM,EAAC;AAAT,GAA3B,CAAP;AACH;;AAGD,SAASC,WAAT,CAAqB;AAAEH,EAAAA;AAAF,CAArB,EAAqC;AACjC;AACA,MAAII,IAAI,GAAGC,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAX,CAFiC,CAGjC;;AACA,MAAI;AAAEC,IAAAA,MAAF;AAASC,IAAAA;AAAT,MAAkBR,UAAtB;AACAK,EAAAA,QAAQ,CAACI,cAAT,CAAwB,MAAxB,EAAgCC,SAAhC,GAA4CH,MAA5C;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBJ,IAArB;AACAJ,EAAAA,IAAI,CAACM,SAAL,IAAkBF,IAAlB;AACH;;AAED,SAASK,kBAAT,CAA4B;AAACC,EAAAA,IAAD;AAAMC,EAAAA;AAAN,CAA5B,EAA6C;AACzC,SAAOD,IAAI,IAAIC,OAAO,CAACC,KAAR,CAAc,GAAd,EAAmBD,OAAO,CAACC,KAAR,CAAc,GAAd,EAAmBC,MAAnB,GAA0B,CAA7C,EAAgDC,OAAhD,CAAwD,KAAxD,EAA8D,EAA9D,CAAf;AACH;AAED;AACA;AACA;;;AACA,SAASC,kBAAT,CAA4BC,YAA5B,EACA;AACI,MAAIC,IAAI,GAAG,EAAX;;AACA,OAAK,IAAIC,KAAT,IAAkBC,MAAM,CAACC,IAAP,CAAYJ,YAAZ,CAAlB,EAA8C;AAC1C,QAAIK,CAAC,GAAIF,MAAM,CAACC,IAAP,CAAYJ,YAAZ,EAA0BH,MAA1B,GAAiC,CAAlC,GAAqCK,KAA7C;AACAD,IAAAA,IAAI,CAACI,CAAD,CAAJ,GAAUL,YAAY,CAACE,KAAD,CAAtB;AACH;;AACD,SAAOD,IAAP;AACH;;AAED,SAASK,SAAT,CAAmBC,MAAnB,EAA2B;AACvB,MAAIC,OAAO,GAAG/B,KAAK,CAACgC,OAAN,CAAc,EAAd,EAAiB,aAAjB,CAAd;;AACA,SAAOlC,SAAS,CAACiC,OAAD,EAASD,MAAT,EAAgB;AAAEG,IAAAA,QAAQ,EAAC;AAAX,GAAhB,CAAhB;AACH;AAED;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASC,iBAAT,CAA2BC,aAA3B,EACA;AACI,QAAMC,mBAAmB,GAAG5B,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAA5B;AACAK,EAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA0CoB,aAA1C;;AACA,OAAK,IAAIjB,OAAT,IAAoBQ,MAAM,CAACC,IAAP,CAAYQ,aAAZ,CAApB,EAAgD;AAC5C;AACA,QAAI;AAAEhC,MAAAA,UAAF;AAAasB,MAAAA;AAAb,QAAuBU,aAAa,CAACjB,OAAD,CAAxC;;AACA,UAAMmB,YAAY,GAAGrB,kBAAkB,CAAC;AAAEC,MAAAA,IAAI,EAACkB,aAAa,CAACjB,OAAD,CAAb,CAAuBmB,YAA9B;AAA2CnB,MAAAA;AAA3C,KAAD,CAAvC;;AAEAoB,IAAAA,MAAM,CAACf,YAAP,GAAsBY,aAAtB;AACA,QAAII,aAAa,GAAG/B,QAAQ,CAACgC,aAAT,CAAuB,QAAvB,CAApB;AACAD,IAAAA,aAAa,CAACE,IAAd,GAAqB,iBAArB;AACAF,IAAAA,aAAa,CAACG,EAAd,GAAoB,GAAExB,OAAQ,EAA9B;AACAoB,IAAAA,MAAM,CAAE,MAAKD,YAAa,EAApB,CAAN,GAA+BlC,UAA/B;;AACA,QAAIe,OAAO,CAACyB,QAAR,CAAiB,SAAjB,CAAJ,EAAiC;AAAEd,MAAAA,SAAS,CAAC3B,QAAQ,CAACC,UAAD,CAAT,CAAT;AAAmC;;AACtEoC,IAAAA,aAAa,CAACK,IAAd,GAAqB1C,QAAQ,CAACC,UAAD,CAA7B;;AACA,QAAIF,cAAc,CAACwB,KAAD,CAAlB,EAA2B;AACvBxB,MAAAA,cAAc,CAACwB,KAAD,CAAd,CAAsBoB,IAAtB,CAA2BN,aAA3B;AACH,KAFD,MAGK;AACDtC,MAAAA,cAAc,CAACwB,KAAD,CAAd,GAAyB,CAAEc,aAAF,CAAzB;AACH;AACJ;;AACD,MAAIO,MAAM,GAAGxB,kBAAkB,CAACrB,cAAD,CAA/B,CAtBJ,CAuBI;;;AACAa,EAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAwCd,cAAxC;;AACA,OAAK,IAAI2B,CAAC,GAAG,CAAb,EAAeA,CAAC,GAAGkB,MAAM,CAAC1B,MAA1B,EAAiCQ,CAAC,EAAlC,EAAsC;AAClC,SAAK,IAAImB,KAAT,IAAkBD,MAAM,CAAClB,CAAD,CAAxB,EAA6B;AACzBd,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAgCgC,KAAhC;AACAX,MAAAA,mBAAmB,CAACY,WAApB,CAAgCD,KAAhC;AACH;AACJ;AACJ;;AAED,SAASE,kBAAT,CAA4BC,gBAA5B,EACA;AACI,QAAMd,mBAAmB,GAAG5B,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAA5B;;AACA,OAAK,IAAI0C,OAAT,IAAoBzB,MAAM,CAACC,IAAP,CAAYuB,gBAAZ,CAApB,EAAoD;AAChD,QAAIE,YAAY,GAAG5C,QAAQ,CAACgC,aAAT,CAAuB,OAAvB,CAAnB;AACAY,IAAAA,YAAY,CAACV,EAAb,GAAmBS,OAAnB;AACAC,IAAAA,YAAY,CAACC,WAAb,GAA2BH,gBAAgB,CAACC,OAAD,CAA3C,CAHgD,CAIhD;;AACAf,IAAAA,mBAAmB,CAACY,WAApB,CAAgCI,YAAhC;AACH;AACJ,C,CAED;;;AACA1D,WAAW,CAAC4D,EAAZ,CAAe1D,CAAC,CAAC2D,OAAjB,EAAyB,CAACC,CAAD,EAAGC,WAAH,KAAmB;AACxC;AACA3C,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6B0C,WAA7B;AACAnD,EAAAA,WAAW,CAACmD,WAAD,CAAX,CAHwC,CAIxC;;AACA,MAAI;AAAEC,IAAAA,EAAF;AAAKC,IAAAA;AAAL,MAAaF,WAAW,CAACG,YAA7B;AACA1B,EAAAA,iBAAiB,CAACwB,EAAD,CAAjB,CANwC,CAOxC;;AACAT,EAAAA,kBAAkB,CAACU,GAAD,CAAlB;AACAjE,EAAAA,WAAW,CAACmE,IAAZ,CAAiBjE,CAAC,CAACkE,QAAnB,EAA4B,SAA5B;AAEH,CAXD,E,CAaA;;AACApE,WAAW,CAAC4D,EAAZ,CAAe1D,CAAC,CAACmE,UAAjB,EAA4B,CAACP,CAAD,EAAGQ,IAAH,KAAY;AACpC,MAAI;AAAE7D,IAAAA,UAAF;AAAa8D,IAAAA;AAAb,MAAsBD,IAA1B;AACA,MAAIzB,aAAa,GAAG/B,QAAQ,CAACI,cAAT,CAAwBqD,IAAxB,CAApB,CAFoC,CAGpC;;AACA1B,EAAAA,aAAa,CAACK,IAAd,GAAqBzC,UAArB;AACH,CALD","sourcesContent":["/** javascript sub process renderer.js handles frontend manipulation of code recieved from the\n * main process.\n  */\nconst { ipcRenderer } = require('electron');\nconst E = require('../events');\nconst prettier = require(\"prettier\");\nconst { writeFile } = require(\"fs\").promises;\nconst _path = require(\"path\");\n\nlet JSDependencies = {};\n\n/** prettier functionality ensures code is properly indented.\n * @param {String} sourceCode argument containing source code.\n * @returns {String} prettified source code.\n */\nfunction prettify(sourceCode) {\n    return prettier.format(sourceCode,{ parser:\"babel\" });\n}\n\n\nfunction setHtmlCode({ sourceCode }) {\n    //set header data\n    let html = document.getElementsByTagName('html')[0];\n    //console.log(\" html \",html.innerHTML);\n    let { header,body } = sourceCode;\n    document.getElementById('head').innerHTML = header;\n    console.log(\" body \",body);\n    html.innerHTML += body;\n}\n\nfunction _fetchVariableName({_var,depPath }) {\n    return _var || depPath.split('/')[depPath.split('/').length-1].replace('.js','');\n}\n\n/** converts javascript object of dependencies to array.\n * @param {*} dependencies object containg script elements of dependencies.\n*/\nfunction _mapJSDependencies(dependencies) \n{\n    let _dep = [];\n    for (let index of Object.keys(dependencies) ) {\n        let i = (Object.keys(dependencies).length-1)-index;\n        _dep[i] = dependencies[index];\n    }\n    return _dep;\n}\n\nfunction setReport(report) {\n    let abspath = _path.resolve(\"\",\"./report.js\")\n    return writeFile(abspath,report,{ encoding:\"utf8\" });\n}\n\n/**\n * Functionality that takes Javascript dependencies and creates script elements\n * which are added to the html source code.\n * @param {*} dependencyMap -> object containing source Code of dependencies\n * and meta-data.\n */\nfunction setJSDependencies(dependencyMap) \n{\n    const htmlParentContainer = document.getElementsByTagName('html')[0];\n    console.log(\" current dependency map(1) \",dependencyMap);\n    for (let depPath of Object.keys(dependencyMap)) {\n        //obtain dependency data.\n        let { sourceCode,index } = dependencyMap[depPath];\n        const variableName = _fetchVariableName({ _var:dependencyMap[depPath].variableName,depPath });\n\n        window.dependencies = dependencyMap;\n        let ScriptElement = document.createElement('script');\n        ScriptElement.type = 'text/javascript';\n        ScriptElement.id = `${depPath}`;\n        window[`map${variableName}`] = sourceCode;\n        if (depPath.includes(\"Numbers\")) { setReport(prettify(sourceCode));  }\n        ScriptElement.text = prettify(sourceCode);\n        if (JSDependencies[index]) {\n            JSDependencies[index].push(ScriptElement);\n        }\n        else {\n            JSDependencies[index]  = [ ScriptElement ];\n        }\n    }\n    let depCon = _mapJSDependencies(JSDependencies);\n    //obtain the JsDependencyContainer;\n    console.log(\" javascript dependencies \",JSDependencies);\n    for (let i = 0;i < depCon.length;i++) { \n        for (let child of depCon[i]) {\n            console.log(\" --current child \",child);\n            htmlParentContainer.appendChild(child);\n        }\n    }\n}\n\nfunction setCSSDependencies(cssDependencyMap) \n{\n    const htmlParentContainer = document.getElementsByTagName('html')[0];\n    for (let csspath of Object.keys(cssDependencyMap))  {\n        let StyleElement = document.createElement('style');\n        StyleElement.id  = csspath;\n        StyleElement.textContent = cssDependencyMap[csspath];\n        //add css style element to container.\n        htmlParentContainer.appendChild(StyleElement);\n    }\n}\n\n//in the event of gui is being run.\nipcRenderer.on(E.RUN_GUI,(e,projectData) => {\n    //set html code.\n    console.log(\" project data \",projectData);\n    setHtmlCode(projectData)\n    //set javascript dependencies.console.log(\"code \",document.querySelector(\"#code\"));\n    let { js,css } = projectData.dependencMap;\n    setJSDependencies(js);\n    //set css dependencies.\n    setCSSDependencies(css);\n    ipcRenderer.send(E.UI_READY,'process');\n    \n})\n\n//in the event that code is being updated.\nipcRenderer.on(E.UPDATE_GUI,(e,data) => {\n    let { sourceCode,path } = data;\n    let ScriptElement = document.getElementById(path);\n    //set source code of script element.\n    ScriptElement.text = sourceCode; \n})\n"],"file":"renderer.js"}